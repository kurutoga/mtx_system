<html>
<body>
<H1>460 Review Questions</H1>
<pre>

               460 REVIEW QUESTIONS

1. BOOTER (LAB #1)
(1). During booting, what does BIOS do?
(2). Where in memory does BIOS load the boot SECTOR?
(3). What does the boot SECTOR do?
(4). HOW TO load a disk block into memory?
(5). When a boot program runs, why are CS,DS,SS set to the same value?
(6). How to convert a disk block number into (cyl,head,sector) for BIOS?
(7). When BIOS loads a disk block, how to tell BIOS where is the real memory 
     address?

2. Multitasking (LAB #2)
   Definition: A process is the execution of an image. 
   An execution image consists of
       |CODE |  DATA | STACK|
   An OS uses a running (or current) PROC pointer to identify the process that's
   currently running in the system.

(1). How does our MTX starts to run the first process P0? <== true for any OS
(2). What's the CODE,DATA and STACK of P0?

(3). In the MTX kernel, there are many READY procs and ONE running proc. 
     What are the images of the procs in KERNEL? i.e. identify the
          CODE, DATA  and STACK 
     of each proc.

(4). IT was said many times in the lecture that a new proc is created in such
     a way that
       AS IF IT RAN BEFORE AND IT GAVE UP CPU by calling tswitch() from 
       some location.
     So, how to create a new proc to make it begin to run from a location
     named HERE?
     
(5). The kernel stack contents of a READY proc depends on the (assembly code) of
         tswitch: 
            SAVE: push ax,bx,cx,dx,bp,si,di,flag
     and  RESUME: which pops SAVED values into CPU registers.
     
     If the SAVE part is modified, e.g. with out push ax, 
     WHAT should be the RESUME part?

  LIKEWISE, if the SAVE part has more pushes, what should be the RESUME part?   


(6). If a proc is running, what are its kernel stack contents?

(7). How does a task "give up" CPU ? What actions does it take while 
     "giving up CPU"?

(8).  sleep()/wakeup(): How do these work?
      pid = wait(&exitValue):   What does it do? HOW (wait logic)?



3. Syscall Calls: (LAB # 3)
(1). What does the instruction  INT 80  do?

(2). What's an interrupt vector? Speciffically, in order to let a proc
     execute   INT  80, what must be in the interrupt vector 80?      

(3). How does a proc enter Kmode (via syscall)?

(4). To create a proc with a Umode image, we 
        PRETEND THAT THE proc DID AN   INT 80  IN UMODE FORM ITS VIRTUAL
        ADDRESS 0.
     According to OUR int80h() assembly code,

         _int80h: push ax,bx,cx,dx,bp,si,di,ES,DS
                  change to DS,SS,ES to Kmode's segment, sp=running's kstack
                  save uSS, uSP into PROC.uss, PROC.usp
                  call _kcinth  in C
         _goUmode: restore save uSS, uSP from PROC
                   pop DS,ES,di,si,bp,dx,cx,bx,ax  
                   iret
     So, what are in ustack of a newly created proc?

     IF WE MODIFY _int80h code by NOT pushing ax,bx,cx,dx, WHAT CHANGES must be
     made to _goUmode code? What would be the ustack contents of a newly created
     process?


(5). When a proc calls syscall(a,b,c,d) to enter Kmode,
     how can it find out the values of a,b,c,d from Kmode?

(6). Every syscall function returns a value, e.g. pid = fork();
     How to return a value from Kmode to Umode?

(7). Uspace and Kspace are 2 DIFFERENT address spaces.
     How to transfer bytes or words between Uspace and Ksapce?
     HOW did you implement the chanme("new proc name") system call? 
     How to implement getProcName(char name[64]) syscall, which allows a proc
         to get its own name string to Umode?

(8). fork() and exec() from Umode:
     HOW DO THEY WORK?

(9). PIPE:
     What's a pipe?
     How to create a pipe?
     After creating a pipe, what must the process do to use the pipe?
     How does a process read_pipe(fd, buf, nbytes)?
     How does a process write_pipe(fd, buf, nbytes)?
     What is a BROKEN pipe? 





            




